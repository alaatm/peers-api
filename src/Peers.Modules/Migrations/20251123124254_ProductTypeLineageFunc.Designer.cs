// <auto-generated />
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using NetTopologySuite.Geometries;
using Peers.Modules.Kernel;

#nullable disable

namespace Peers.Modules.Migrations
{
    [DbContext(typeof(PeersContext))]
    [Migration("20251123124254_ProductTypeLineageFunc")]
    partial class ProductTypeLineageFunc
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.0")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.HasSequence<int>("app_user_seq")
                .IncrementsBy(100);

            modelBuilder.HasSequence<int>("listing_seq")
                .IncrementsBy(100);

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRole<int>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("concurrency_stamp");

                    b.Property<string>("Name")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.Property<string>("NormalizedName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("normalized_name");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedName")
                        .IsUnique()
                        .HasDatabaseName("RoleNameIndex")
                        .HasFilter("[normalized_name] IS NOT NULL");

                    b.ToTable("role", "id");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<int>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("claim_type");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("claim_value");

                    b.Property<int>("RoleId")
                        .HasColumnType("int")
                        .HasColumnName("role_id");

                    b.HasKey("Id");

                    b.HasIndex("RoleId");

                    b.ToTable("role_claim", "id");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<int>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("claim_type");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("claim_value");

                    b.Property<int>("UserId")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("user_claim", "id");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<int>", b =>
                {
                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)")
                        .HasColumnName("login_provider");

                    b.Property<string>("ProviderKey")
                        .HasColumnType("nvarchar(450)")
                        .HasColumnName("provider_key");

                    b.Property<string>("ProviderDisplayName")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("provider_display_name");

                    b.Property<int>("UserId")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.HasKey("LoginProvider", "ProviderKey");

                    b.HasIndex("UserId");

                    b.ToTable("user_login", "id");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<int>", b =>
                {
                    b.Property<int>("UserId")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.Property<int>("RoleId")
                        .HasColumnType("int")
                        .HasColumnName("role_id");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("user_role", "id");
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<int>", b =>
                {
                    b.Property<int>("UserId")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)")
                        .HasColumnName("login_provider");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(450)")
                        .HasColumnName("name");

                    b.Property<string>("Value")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("value");

                    b.HasKey("UserId", "LoginProvider", "Name");

                    b.ToTable("user_token", "id");
                });

            modelBuilder.Entity("Peers.Modules.Carts.Domain.Cart", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("BuyerId")
                        .HasColumnType("int")
                        .HasColumnName("buyer_id");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("created_at");

                    b.Property<DateTime>("LastTouchedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("last_touched_at");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("rowversion")
                        .HasColumnName("row_version");

                    b.Property<int>("SellerId")
                        .HasColumnType("int")
                        .HasColumnName("seller_id");

                    b.HasKey("Id");

                    b.HasIndex("SellerId");

                    b.HasIndex("BuyerId", "SellerId")
                        .IsUnique();

                    b.ToTable("cart", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsRequired")
                        .HasColumnType("bit")
                        .HasColumnName("is_required");

                    b.Property<bool>("IsVariant")
                        .HasColumnType("bit")
                        .HasColumnName("is_variant");

                    b.Property<string>("Key")
                        .IsRequired()
                        .HasMaxLength(64)
                        .IsUnicode(true)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("key");

                    b.Property<int>("Kind")
                        .HasColumnType("int")
                        .HasColumnName("kind");

                    b.Property<int>("Position")
                        .HasColumnType("int")
                        .HasColumnName("position");

                    b.Property<int>("ProductTypeId")
                        .HasColumnType("int")
                        .HasColumnName("product_type_id");

                    b.HasKey("Id");

                    b.HasIndex("ProductTypeId", "Key")
                        .IsUnique();

                    b.HasIndex("ProductTypeId", "Position");

                    b.ToTable("attribute_definition", "catalog", t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator<int>("Kind");

                    b.UseTphMappingStrategy();
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(64)
                        .IsUnicode(true)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("code");

                    b.Property<int>("EnumAttributeDefinitionId")
                        .HasColumnType("int")
                        .HasColumnName("enum_attribute_definition_id");

                    b.Property<int?>("ParentOptionId")
                        .HasColumnType("int")
                        .HasColumnName("parent_option_id");

                    b.Property<int>("Position")
                        .HasColumnType("int")
                        .HasColumnName("position");

                    b.HasKey("Id");

                    b.HasIndex("ParentOptionId");

                    b.HasIndex("EnumAttributeDefinitionId", "Code")
                        .IsUnique();

                    b.HasIndex("EnumAttributeDefinitionId", "Position")
                        .IsUnique();

                    b.ToTable("enum_attribute_option", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.ProductType", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsSelectable")
                        .HasColumnType("bit")
                        .HasColumnName("is_selectable");

                    b.Property<int>("Kind")
                        .HasColumnType("int")
                        .HasColumnName("kind");

                    b.Property<int?>("ParentId")
                        .HasColumnType("int")
                        .HasColumnName("parent_id");

                    b.Property<string>("Slug")
                        .IsRequired()
                        .HasMaxLength(64)
                        .IsUnicode(false)
                        .HasColumnType("varchar(64)")
                        .HasColumnName("slug");

                    b.Property<string>("SlugPath")
                        .IsRequired()
                        .HasMaxLength(512)
                        .IsUnicode(false)
                        .HasColumnType("varchar(512)")
                        .HasColumnName("slug_path");

                    b.Property<int>("State")
                        .HasColumnType("int")
                        .HasColumnName("state");

                    b.Property<int>("Version")
                        .HasColumnType("int")
                        .HasColumnName("version");

                    b.HasKey("Id");

                    b.HasIndex("SlugPath")
                        .IsUnique();

                    b.HasIndex("IsSelectable", "ParentId");

                    b.HasIndex("ParentId", "Slug", "Version")
                        .IsUnique()
                        .HasFilter("[parent_id] IS NOT NULL");

                    b.ToTable("product_type", "catalog");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.AttributeDefinitionTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.Property<string>("Unit")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("unit");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("attribute_definition_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.EnumAttributeOptionTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("enum_attribute_option_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.ProductTypeTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("product_type_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.Customer", b =>
                {
                    b.Property<int>("Id")
                        .HasColumnType("int")
                        .HasColumnName("id");

                    b.Property<string>("PinCodeHash")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("pin_code_hash");

                    b.Property<string>("Secret")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("secret");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("username");

                    b.HasKey("Id");

                    b.HasIndex("Username")
                        .IsUnique();

                    b.ToTable("customer", (string)null);

                    b.UseTptMappingStrategy();
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.CustomerAddress", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("CustomerId")
                        .HasColumnType("int")
                        .HasColumnName("customer_id");

                    b.Property<bool>("IsDefault")
                        .HasColumnType("bit")
                        .HasColumnName("is_default");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("name");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Address", "Peers.Modules.Customers.Domain.CustomerAddress.Address#Address", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<string>("ApartmentNumber")
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("apartment_number");

                            b1.Property<string>("BuildingNumber")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("building_number");

                            b1.Property<string>("City")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("city");

                            b1.Property<string>("Country")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("country");

                            b1.Property<string>("District")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("district");

                            b1.Property<string>("FormattedAddress")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("formatted_address");

                            b1.Property<string>("Governorate")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("governorate");

                            b1.Property<Point>("Location")
                                .IsRequired()
                                .HasColumnType("geography")
                                .HasColumnName("location");

                            b1.Property<string>("Street")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("street");
                        });

                    b.HasKey("Id");

                    b.HasIndex("CustomerId")
                        .IsUnique()
                        .HasFilter("[is_default] = 1");

                    b.HasIndex("CustomerId", "Name")
                        .IsUnique();

                    b.ToTable("customer_address", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.PaymentMethod", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateTime>("AddedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("added_on");

                    b.Property<int>("CustomerId")
                        .HasColumnType("int")
                        .HasColumnName("customer_id");

                    b.Property<DateTime?>("DeletedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("deleted_on");

                    b.Property<bool>("IsDefault")
                        .HasColumnType("bit")
                        .HasColumnName("is_default");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bit")
                        .HasColumnName("is_deleted")
                        .HasComputedColumnSql("CAST(CASE WHEN [deleted_on] IS NULL THEN 0 ELSE 1 END AS bit)");

                    b.Property<int>("Type")
                        .HasColumnType("int")
                        .HasColumnName("type");

                    b.HasKey("Id");

                    b.HasIndex("CustomerId");

                    b.HasIndex("IsDeleted");

                    b.HasIndex("Type");

                    b.ToTable("payment_method", (string)null);

                    b.HasDiscriminator<int>("Type");

                    b.UseTphMappingStrategy();
                });

            modelBuilder.Entity("Peers.Modules.I18n.Domain.Language", b =>
                {
                    b.Property<string>("Id")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("id");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("name");

                    b.HasKey("Id");

                    b.ToTable("language", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Kernel.PeersContext+ProductTypeLineageRow", b =>
                {
                    b.Property<int>("Id")
                        .HasColumnType("int")
                        .HasColumnName("id");

                    b.Property<int>("Lvl")
                        .HasColumnType("int")
                        .HasColumnName("lvl");

                    b.Property<int?>("ParentId")
                        .HasColumnType("int")
                        .HasColumnName("parent_id");

                    b.HasKey("Id");

                    b.ToTable((string)null);

                    b.ToFunction("[catalog].[ufn_ProductTypeLineage]");
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.Listing", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseHiLo(b.Property<int>("Id"), "listing_seq");

                    b.Property<decimal>("BasePrice")
                        .HasPrecision(18, 2)
                        .HasColumnType("decimal(18,2)")
                        .HasColumnName("base_price");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("created_at");

                    b.Property<string>("Description")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("description");

                    b.Property<string>("Hashtag")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("hashtag");

                    b.Property<int>("ProductTypeId")
                        .HasColumnType("int")
                        .HasColumnName("product_type_id");

                    b.Property<int>("ProductTypeVersion")
                        .HasColumnType("int")
                        .HasColumnName("product_type_version");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("rowversion")
                        .HasColumnName("row_version");

                    b.Property<int>("SellerId")
                        .HasColumnType("int")
                        .HasColumnName("seller_id");

                    b.Property<int?>("ShippingProfileId")
                        .HasColumnType("int")
                        .HasColumnName("shipping_profile_id");

                    b.Property<string>("Snapshot")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("snapshot");

                    b.Property<int>("State")
                        .HasColumnType("int")
                        .HasColumnName("state");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("title");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("updated_at");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "FulfillmentPreferences", "Peers.Modules.Listings.Domain.Listing.FulfillmentPreferences#FulfillmentPreferences", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<int>("Method")
                                .HasColumnType("int")
                                .HasColumnName("fp_method");

                            b1.Property<bool?>("NonReturnable")
                                .HasColumnType("bit")
                                .HasColumnName("fp_non_returnable");

                            b1.Property<int?>("OutboundPaidBy")
                                .HasColumnType("int")
                                .HasColumnName("fp_outbound_paid_by");

                            b1.Property<int?>("ReturnPaidBy")
                                .HasColumnType("int")
                                .HasColumnName("fp_return_paid_by");

                            b1.ComplexProperty(typeof(Dictionary<string, object>), "OrderQtyPolicy", "Peers.Modules.Listings.Domain.Listing.FulfillmentPreferences#FulfillmentPreferences.OrderQtyPolicy#OrderQtyPolicy", b2 =>
                                {
                                    b2.Property<int>("Max")
                                        .HasColumnType("int")
                                        .HasColumnName("fp_oqp_max");

                                    b2.Property<int>("Min")
                                        .HasColumnType("int")
                                        .HasColumnName("fp_oqp_min");
                                });

                            b1.ComplexProperty(typeof(Dictionary<string, object>), "ServiceArea", "Peers.Modules.Listings.Domain.Listing.FulfillmentPreferences#FulfillmentPreferences.ServiceArea#ServiceArea", b2 =>
                                {
                                    b2.Property<Point>("Center")
                                        .IsRequired()
                                        .HasColumnType("geography")
                                        .HasColumnName("fp_sa_center");

                                    b2.Property<double>("Radius")
                                        .HasColumnType("float")
                                        .HasColumnName("fp_sa_radius");
                                });
                        });

                    b.HasKey("Id");

                    b.HasIndex("ProductTypeId");

                    b.HasIndex("ShippingProfileId");

                    b.HasIndex("SellerId", "Hashtag")
                        .IsUnique()
                        .HasFilter("[hashtag] IS NOT NULL");

                    b.ToTable("listing", null, t =>
                        {
                            t.HasCheckConstraint("CK_Listing_BasePrice_NonNegative", "[base_price] >= 0");

                            t.HasCheckConstraint("CK_Listing_OrderQtyPolicy", "([fp_oqp_min] IS NULL OR [fp_oqp_min] >= 1)\r\nAND ([fp_oqp_max] IS NULL OR [fp_oqp_max] >= 1)\r\nAND ([fp_oqp_min] IS NULL OR [fp_oqp_max] IS NULL OR [fp_oqp_max] >= [fp_oqp_min])");
                        });
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.ListingVariant", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit")
                        .HasColumnName("is_active");

                    b.Property<int>("ListingId")
                        .HasColumnType("int")
                        .HasColumnName("listing_id");

                    b.Property<decimal>("Price")
                        .HasPrecision(18, 2)
                        .HasColumnType("decimal(18,2)")
                        .HasColumnName("price");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("rowversion")
                        .HasColumnName("row_version");

                    b.Property<string>("SelectionSnapshot")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("selection_snapshot");

                    b.Property<string>("SkuCode")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("sku_code");

                    b.Property<int?>("StockQty")
                        .HasColumnType("int")
                        .HasColumnName("stock_qty");

                    b.Property<string>("VariantKey")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("variant_key");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Logistics", "Peers.Modules.Listings.Domain.ListingVariant.Logistics#LogisticsProfile", b1 =>
                        {
                            b1.Property<bool>("Fragile")
                                .HasColumnType("bit")
                                .HasColumnName("logi_fragile");

                            b1.Property<bool>("Hazmat")
                                .HasColumnType("bit")
                                .HasColumnName("logi_hazmat");

                            b1.Property<int>("TemperatureControl")
                                .HasColumnType("int")
                                .HasColumnName("logi_temperature_control");

                            b1.Property<decimal>("Weight")
                                .HasColumnType("decimal(10,3)")
                                .HasColumnName("logi_weight");

                            b1.ComplexProperty(typeof(Dictionary<string, object>), "Dimensions", "Peers.Modules.Listings.Domain.ListingVariant.Logistics#LogisticsProfile.Dimensions#Dimensions", b2 =>
                                {
                                    b2.IsRequired();

                                    b2.Property<double>("Height")
                                        .HasColumnType("float")
                                        .HasColumnName("logi_dim_height");

                                    b2.Property<double>("Length")
                                        .HasColumnType("float")
                                        .HasColumnName("logi_dim_length");

                                    b2.Property<double>("Width")
                                        .HasColumnType("float")
                                        .HasColumnName("logi_dim_width");
                                });
                        });

                    b.HasKey("Id");

                    b.HasIndex("IsActive");

                    b.HasIndex("ListingId", "SkuCode")
                        .IsUnique();

                    b.HasIndex("ListingId", "VariantKey")
                        .IsUnique();

                    b.ToTable("listing_variant", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.Translations.ListingTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Description")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("description");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("title");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("listing_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupLink", b =>
                {
                    b.Property<int>("ParentTypeId")
                        .HasColumnType("int")
                        .HasColumnName("parent_type_id");

                    b.Property<int>("ParentOptionId")
                        .HasColumnType("int")
                        .HasColumnName("parent_option_id");

                    b.Property<int>("ChildTypeId")
                        .HasColumnType("int")
                        .HasColumnName("child_type_id");

                    b.Property<int>("ChildOptionId")
                        .HasColumnType("int")
                        .HasColumnName("child_option_id");

                    b.HasKey("ParentTypeId", "ParentOptionId", "ChildTypeId", "ChildOptionId");

                    b.HasIndex("ChildTypeId", "ChildOptionId");

                    b.ToTable("lookup_link", "lookup");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupOption", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(64)
                        .IsUnicode(false)
                        .HasColumnType("varchar(64)")
                        .HasColumnName("code");

                    b.Property<int>("TypeId")
                        .HasColumnType("int")
                        .HasColumnName("type_id");

                    b.HasKey("Id");

                    b.HasIndex("TypeId", "Code")
                        .IsUnique();

                    b.ToTable("lookup_option", "lookup");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupType", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("AllowVariant")
                        .HasColumnType("bit")
                        .HasColumnName("allow_variant");

                    b.Property<int>("ConstraintMode")
                        .HasColumnType("int")
                        .HasColumnName("constraint_mode");

                    b.Property<string>("Key")
                        .IsRequired()
                        .HasMaxLength(64)
                        .IsUnicode(false)
                        .HasColumnType("varchar(64)")
                        .HasColumnName("key");

                    b.HasKey("Id");

                    b.HasIndex("Key")
                        .IsUnique();

                    b.ToTable("lookup_type", "lookup");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.Translations.LookupOptionTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("lookup_option_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Media.Domain.MediaFile", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("Approved")
                        .HasColumnType("bit")
                        .HasColumnName("approved");

                    b.Property<Guid>("BatchId")
                        .HasColumnType("uniqueidentifier")
                        .HasColumnName("batch_id");

                    b.Property<int>("Category")
                        .HasColumnType("int")
                        .HasColumnName("category");

                    b.Property<string>("ContentType")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("content_type");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("created_at");

                    b.Property<int>("CustomerId")
                        .HasColumnType("int")
                        .HasColumnName("customer_id");

                    b.Property<string>("Description")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("description");

                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("MediaUrl")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("media_url");

                    b.Property<long?>("SizeInBytes")
                        .HasColumnType("bigint")
                        .HasColumnName("size_in_bytes");

                    b.Property<int>("Status")
                        .HasColumnType("int")
                        .HasColumnName("status");

                    b.Property<int?>("ThumbnailId")
                        .HasColumnType("int")
                        .HasColumnName("thumbnail_id");

                    b.Property<int>("Type")
                        .HasColumnType("int")
                        .HasColumnName("type");

                    b.HasKey("Id");

                    b.HasIndex("Approved");

                    b.HasIndex("BatchId");

                    b.HasIndex("Category");

                    b.HasIndex("CustomerId");

                    b.HasIndex("EntityId");

                    b.HasIndex("Status");

                    b.HasIndex("ThumbnailId")
                        .IsUnique()
                        .HasFilter("[thumbnail_id] IS NOT NULL");

                    b.HasIndex("Type");

                    b.HasIndex("Type", "ThumbnailId", "CustomerId")
                        .IsUnique()
                        .HasFilter("[type] = 0");

                    b.ToTable("media_file", "dbo");
                });

            modelBuilder.Entity("Peers.Modules.Ordering.Domain.Order", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("BuyerId")
                        .HasColumnType("int")
                        .HasColumnName("buyer_id");

                    b.Property<int?>("CancellationReason")
                        .HasColumnType("int")
                        .HasColumnName("cancellation_reason");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("delivered_at");

                    b.Property<decimal>("ItemsTotal")
                        .HasPrecision(18, 2)
                        .HasColumnType("decimal(18,2)")
                        .HasColumnName("items_total");

                    b.Property<string>("Number")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("number");

                    b.Property<int?>("PaymentMethodId")
                        .HasColumnType("int")
                        .HasColumnName("payment_method_id");

                    b.Property<DateTime>("PlacedAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("placed_at");

                    b.Property<DateTime?>("ReadyToShipAt")
                        .HasColumnType("datetime2")
                        .HasColumnName("ready_to_ship_at");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("rowversion")
                        .HasColumnName("row_version");

                    b.Property<int>("SellerId")
                        .HasColumnType("int")
                        .HasColumnName("seller_id");

                    b.Property<decimal>("ShippingFee")
                        .HasPrecision(18, 2)
                        .HasColumnType("decimal(18,2)")
                        .HasColumnName("shipping_fee");

                    b.Property<int>("State")
                        .HasColumnType("int")
                        .HasColumnName("state");

                    b.HasKey("Id");

                    b.HasIndex("PaymentMethodId");

                    b.HasIndex("SellerId");

                    b.HasIndex("BuyerId", "SellerId")
                        .IsUnique()
                        .HasFilter("[state] = 0");

                    b.ToTable("order", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Sellers.Domain.ShippingProfile", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("name");

                    b.Property<Point>("OriginLocation")
                        .IsRequired()
                        .HasColumnType("geography")
                        .HasColumnName("origin_location");

                    b.Property<int>("SellerId")
                        .HasColumnType("int")
                        .HasColumnName("seller_id");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "FreeShippingPolicy", "Peers.Modules.Sellers.Domain.ShippingProfile.FreeShippingPolicy#FreeShippingPolicy", b1 =>
                        {
                            b1.Property<double>("MaxDistance")
                                .HasColumnType("float")
                                .HasColumnName("fsp_max_distance");

                            b1.Property<decimal>("MinOrder")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("fsp_min_order");
                        });

                    b.ComplexProperty(typeof(Dictionary<string, object>), "Rate", "Peers.Modules.Sellers.Domain.ShippingProfile.Rate#SellerManagedRate", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<decimal?>("BaseFee")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("r_base_fee");

                            b1.Property<decimal?>("FlatAmount")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("r_flat_amount");

                            b1.Property<int>("Kind")
                                .HasColumnType("int")
                                .HasColumnName("r_kind");

                            b1.Property<decimal?>("MinFee")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("r_min_fee");

                            b1.Property<decimal?>("RatePerKg")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("r_rate_per_kg");

                            b1.Property<decimal?>("RatePerKm")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("r_rate_per_km");
                        });

                    b.HasKey("Id");

                    b.HasIndex("SellerId", "Name")
                        .IsUnique();

                    b.ToTable("shipping_profile", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.PrivacyPolicy", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateOnly>("EffectiveDate")
                        .HasColumnType("date")
                        .HasColumnName("effective_date");

                    b.HasKey("Id");

                    b.ToTable("privacy_policy", "settings");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.PrivacyPolicyTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Body")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("body");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("title");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("privacy_policy_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.Terms", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.HasKey("Id");

                    b.ToTable("terms", "settings");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.TermsTr", b =>
                {
                    b.Property<int>("EntityId")
                        .HasColumnType("int")
                        .HasColumnName("entity_id");

                    b.Property<string>("LangCode")
                        .HasMaxLength(2)
                        .IsUnicode(false)
                        .HasColumnType("varchar(2)")
                        .HasColumnName("lang_code");

                    b.Property<string>("Body")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("body");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("title");

                    b.HasKey("EntityId", "LangCode");

                    b.HasIndex("LangCode");

                    b.ToTable("terms_tr", "i18n");
                });

            modelBuilder.Entity("Peers.Modules.SystemInfo.Domain.ClientAppInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1)
                        .HasColumnName("id");

                    b.Property<string>("AndroidStoreLink")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("android_store_link");

                    b.Property<string>("HashString")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("hash_string");

                    b.Property<string>("IOSStoreLink")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("ios_store_link");

                    b.Property<string>("PackageName")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("package_name");

                    b.ComplexProperty(typeof(Dictionary<string, object>), "LatestVersion", "Peers.Modules.SystemInfo.Domain.ClientAppInfo.LatestVersion#ClientAppVersion", b1 =>
                        {
                            b1.IsRequired();

                            b1.Property<int>("Build")
                                .HasColumnType("int")
                                .HasColumnName("build");

                            b1.Property<int>("Major")
                                .HasColumnType("int")
                                .HasColumnName("major");

                            b1.Property<int>("Minor")
                                .HasColumnType("int")
                                .HasColumnName("minor");

                            b1.Property<int>("Revision")
                                .HasColumnType("int")
                                .HasColumnName("revision");
                        });

                    b.HasKey("Id");

                    b.HasIndex("AndroidStoreLink")
                        .IsUnique();

                    b.HasIndex("HashString")
                        .IsUnique();

                    b.HasIndex("IOSStoreLink")
                        .IsUnique();

                    b.HasIndex("PackageName")
                        .IsUnique();

                    b.ToTable("client_app_info", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.AppUser", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseHiLo(b.Property<int>("Id"), "app_user_seq");

                    b.Property<int>("AccessFailedCount")
                        .HasColumnType("int")
                        .HasColumnName("access_failed_count");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("concurrency_stamp");

                    b.Property<DateTime?>("DeletedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("deleted_on");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("email");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("bit")
                        .HasColumnName("email_confirmed");

                    b.Property<string>("Firstname")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("firstname");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit")
                        .HasColumnName("is_deleted");

                    b.Property<string>("Lastname")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("lastname");

                    b.Property<bool>("LockoutEnabled")
                        .HasColumnType("bit")
                        .HasColumnName("lockout_enabled");

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("datetimeoffset")
                        .HasColumnName("lockout_end");

                    b.Property<string>("NormalizedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("normalized_email");

                    b.Property<string>("NormalizedUserName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("normalized_user_name");

                    b.Property<string>("OriginalDeletedUsername")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("original_deleted_username");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("password_hash");

                    b.Property<string>("PhoneNumber")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("phone_number");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .HasColumnType("bit")
                        .HasColumnName("phone_number_confirmed");

                    b.Property<string>("PreferredLanguage")
                        .IsRequired()
                        .HasMaxLength(6)
                        .HasColumnType("nvarchar(6)")
                        .HasColumnName("preferred_language");

                    b.Property<DateTime>("RegisteredOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("registered_on");

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("security_stamp");

                    b.Property<int>("Status")
                        .HasColumnType("int")
                        .HasColumnName("status");

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("bit")
                        .HasColumnName("two_factor_enabled");

                    b.Property<string>("UpdatedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("updated_email");

                    b.Property<string>("UserName")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)")
                        .HasColumnName("user_name");

                    b.HasKey("Id");

                    b.HasIndex("IsDeleted");

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("EmailIndex");

                    b.HasIndex("NormalizedUserName")
                        .IsUnique()
                        .HasDatabaseName("UserNameIndex")
                        .HasFilter("[normalized_user_name] IS NOT NULL");

                    b.HasIndex("Status");

                    b.HasIndex("UserName")
                        .IsUnique()
                        .HasFilter("[user_name] IS NOT NULL");

                    b.ToTable("app_user", "id");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.Device", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("App")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("app");

                    b.Property<string>("AppVersion")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("app_version");

                    b.Property<Guid>("DeviceId")
                        .HasColumnType("uniqueidentifier")
                        .HasColumnName("device_id");

                    b.Property<string>("DeviceType")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("device_type");

                    b.Property<string>("Idiom")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("idiom");

                    b.Property<DateTime?>("LastPing")
                        .HasColumnType("datetime2")
                        .HasColumnName("last_ping");

                    b.Property<string>("Manufacturer")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("manufacturer");

                    b.Property<string>("Model")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("model");

                    b.Property<string>("OSVersion")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("os_version");

                    b.Property<string>("Platform")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("platform");

                    b.Property<string>("PnsHandle")
                        .HasMaxLength(400)
                        .HasColumnType("nvarchar(400)")
                        .HasColumnName("pns_handle");

                    b.Property<DateTime>("PnsHandleLastRefreshed")
                        .HasColumnType("datetime2")
                        .HasColumnName("pns_handle_last_refreshed");

                    b.Property<DateTime>("PnsHandleTimestamp")
                        .HasColumnType("datetime2")
                        .HasColumnName("pns_handle_timestamp");

                    b.Property<DateTime>("RegisteredOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("registered_on");

                    b.Property<int>("UserId")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("DeviceId")
                        .IsUnique();

                    b.HasIndex("PnsHandle")
                        .IsUnique()
                        .HasFilter("[pns_handle] IS NOT NULL");

                    b.HasIndex("UserId");

                    b.ToTable("device", "dbo");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.DeviceError", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("AppState")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("app_state");

                    b.Property<string>("AppVersion")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("app_version");

                    b.Property<Guid>("DeviceId")
                        .HasColumnType("uniqueidentifier")
                        .HasColumnName("device_id");

                    b.Property<string>("DeviceInfo")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("device_info");

                    b.Property<string>("Exception")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("exception");

                    b.PrimitiveCollection<string>("Info")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("info");

                    b.Property<string>("Locale")
                        .HasMaxLength(12)
                        .HasColumnType("nvarchar(12)")
                        .HasColumnName("locale");

                    b.Property<DateTime>("ReportedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("reported_on");

                    b.Property<bool>("Silent")
                        .HasColumnType("bit")
                        .HasColumnName("silent");

                    b.Property<string>("Source")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("source");

                    b.PrimitiveCollection<string>("StackTrace")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("stack_trace");

                    b.Property<string>("Username")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)")
                        .HasColumnName("username");

                    b.HasKey("Id");

                    b.ToTable("device_error", "dbo");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.Notification", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Contents")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("contents");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("created_by");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("created_on");

                    b.HasKey("Id");

                    b.ToTable("notification", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.PushNotificationProblem", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("ErrorCode")
                        .HasColumnType("int")
                        .HasColumnName("error_code");

                    b.Property<int?>("MessagingErrorCode")
                        .HasColumnType("int")
                        .HasColumnName("messaging_error_code");

                    b.Property<DateTime>("ReportedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("reported_on");

                    b.Property<string>("Token")
                        .IsRequired()
                        .HasMaxLength(400)
                        .HasColumnType("nvarchar(400)")
                        .HasColumnName("token");

                    b.HasKey("Id");

                    b.HasIndex("ErrorCode");

                    b.HasIndex("Token");

                    b.ToTable("push_notification_problem", "dbo");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.UserNotification", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit")
                        .HasColumnName("is_read");

                    b.Property<int>("notification_id")
                        .HasColumnType("int")
                        .HasColumnName("notification_id");

                    b.Property<int>("user_id")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("notification_id");

                    b.HasIndex("user_id");

                    b.ToTable("user_notification", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.UserStatusChange", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasColumnName("id");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ChangeReason")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)")
                        .HasColumnName("change_reason");

                    b.Property<int>("ChangedById")
                        .HasColumnType("int")
                        .HasColumnName("changed_by_id");

                    b.Property<DateTime>("ChangedOn")
                        .HasColumnType("datetime2")
                        .HasColumnName("changed_on");

                    b.Property<int>("NewStatus")
                        .HasColumnType("int")
                        .HasColumnName("new_status");

                    b.Property<int>("OldStatus")
                        .HasColumnType("int")
                        .HasColumnName("old_status");

                    b.Property<int>("user_id")
                        .HasColumnType("int")
                        .HasColumnName("user_id");

                    b.HasKey("Id");

                    b.HasIndex("ChangedById");

                    b.HasIndex("user_id");

                    b.ToTable("user_status_change_history", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.BoolAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(3);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.DateAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(4);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.Property<int?>("DependsOnId")
                        .HasColumnType("int")
                        .HasColumnName("depends_on_id");

                    b.HasIndex("DependsOnId");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(6);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.GroupAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(5);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.LookupAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.Property<string>("Config")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("config");

                    b.Property<int>("LookupTypeId")
                        .HasColumnType("int")
                        .HasColumnName("lookup_type_id");

                    b.HasIndex("LookupTypeId");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(7);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.NumericAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.Property<int?>("GroupDefinitionId")
                        .HasColumnType("int")
                        .HasColumnName("group_definition_id");

                    b.HasIndex("GroupDefinitionId");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.StringAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition");

                    b.Property<string>("Config")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("config");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(2);
                });

            modelBuilder.Entity("Peers.Modules.Sellers.Domain.Seller", b =>
                {
                    b.HasBaseType("Peers.Modules.Customers.Domain.Customer");

                    b.ToTable("seller", (string)null);
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.ApplePay", b =>
                {
                    b.HasBaseType("Peers.Modules.Customers.Domain.PaymentMethod");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit")
                        .HasColumnName("is_active");

                    b.HasDiscriminator().HasValue(1);
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.Cash", b =>
                {
                    b.HasBaseType("Peers.Modules.Customers.Domain.PaymentMethod");

                    b.HasDiscriminator().HasValue(2);
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.PaymentCard", b =>
                {
                    b.HasBaseType("Peers.Modules.Customers.Domain.PaymentMethod");

                    b.Property<int?>("Brand")
                        .HasColumnType("int")
                        .HasColumnName("brand");

                    b.Property<DateOnly?>("Expiry")
                        .HasColumnType("date")
                        .HasColumnName("expiry");

                    b.Property<string>("First6Digits")
                        .IsRequired()
                        .HasMaxLength(6)
                        .HasColumnType("nvarchar(6)")
                        .HasColumnName("first6_digits");

                    b.Property<int?>("Funding")
                        .HasColumnType("int")
                        .HasColumnName("funding");

                    b.Property<bool>("IsVerified")
                        .HasColumnType("bit")
                        .HasColumnName("is_verified");

                    b.Property<string>("Last4Digits")
                        .IsRequired()
                        .HasMaxLength(4)
                        .HasColumnType("nvarchar(4)")
                        .HasColumnName("last4_digits");

                    b.Property<string>("PaymentId")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("payment_id");

                    b.Property<string>("Token")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)")
                        .HasColumnName("token");

                    b.HasIndex("IsVerified");

                    b.HasIndex("PaymentId");

                    b.HasDiscriminator().HasValue(0);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.DecimalAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.NumericAttributeDefinition");

                    b.Property<string>("Config")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("config");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(1);
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.IntAttributeDefinition", b =>
                {
                    b.HasBaseType("Peers.Modules.Catalog.Domain.Attributes.NumericAttributeDefinition");

                    b.Property<string>("Config")
                        .IsRequired()
                        .ValueGeneratedOnUpdateSometimes()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("config");

                    b.ToTable(t =>
                        {
                            t.HasCheckConstraint("CK_AD_Group_VariantOnly", "[kind] <> 5 OR is_variant = 1");

                            t.HasCheckConstraint("CK_AD_IsVariant_NumericGroupEnumLookupOnly", "[is_variant] = 0 OR [kind] IN (0,1,5,6,7)");

                            t.HasCheckConstraint("CK_AD_LookupTypeId_LookupOnly", "(\r\n    ([kind] = 7 AND [lookup_type_id] IS NOT NULL)\r\n    OR\r\n    ([kind] <> 7 AND [lookup_type_id] IS NULL)\r\n)");
                        });

                    b.HasDiscriminator().HasValue(0);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<int>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole<int>", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<int>", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<int>", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<int>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole<int>", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Users.Domain.AppUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<int>", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Carts.Domain.Cart", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", "Buyer")
                        .WithMany()
                        .HasForeignKey("BuyerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Sellers.Domain.Seller", "Seller")
                        .WithMany()
                        .HasForeignKey("SellerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsMany("Peers.Modules.Carts.Domain.CartLine", "Lines", b1 =>
                        {
                            b1.Property<int>("CartId")
                                .HasColumnType("int")
                                .HasColumnName("cart_id");

                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("int")
                                .HasColumnName("id");

                            SqlServerPropertyBuilderExtensions.UseIdentityColumn(b1.Property<int>("Id"));

                            b1.Property<int>("ListingId")
                                .HasColumnType("int")
                                .HasColumnName("listing_id");

                            b1.Property<int>("Quantity")
                                .HasColumnType("int")
                                .HasColumnName("quantity");

                            b1.Property<decimal>("UnitPrice")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("unit_price");

                            b1.Property<int>("VariantId")
                                .HasColumnType("int")
                                .HasColumnName("variant_id");

                            b1.HasKey("CartId", "Id");

                            b1.HasIndex("ListingId");

                            b1.HasIndex("VariantId");

                            b1.HasIndex("CartId", "VariantId")
                                .IsUnique();

                            b1.ToTable("cart_line", (string)null);

                            b1.WithOwner("Cart")
                                .HasForeignKey("CartId");

                            b1.HasOne("Peers.Modules.Listings.Domain.Listing", "Listing")
                                .WithMany()
                                .HasForeignKey("ListingId")
                                .OnDelete(DeleteBehavior.Cascade)
                                .IsRequired();

                            b1.HasOne("Peers.Modules.Listings.Domain.ListingVariant", "Variant")
                                .WithMany()
                                .HasForeignKey("VariantId")
                                .OnDelete(DeleteBehavior.Cascade)
                                .IsRequired();

                            b1.Navigation("Cart");

                            b1.Navigation("Listing");

                            b1.Navigation("Variant");
                        });

                    b.Navigation("Buyer");

                    b.Navigation("Lines");

                    b.Navigation("Seller");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.ProductType", "ProductType")
                        .WithMany("Attributes")
                        .HasForeignKey("ProductTypeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ProductType");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeDefinition", "EnumAttributeDefinition")
                        .WithMany("Options")
                        .HasForeignKey("EnumAttributeDefinitionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", "ParentOption")
                        .WithMany()
                        .HasForeignKey("ParentOptionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("EnumAttributeDefinition");

                    b.Navigation("ParentOption");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.ProductType", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.ProductType", "Parent")
                        .WithMany("Children")
                        .HasForeignKey("ParentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.OwnsOne("Peers.Modules.Catalog.Domain.ProductTypeIndex", "Index", b1 =>
                        {
                            b1.Property<int>("ProductTypeId")
                                .HasColumnType("int")
                                .HasColumnName("product_type_id");

                            b1.Property<string>("Snapshot")
                                .IsRequired()
                                .HasColumnType("nvarchar(max)")
                                .HasColumnName("snapshot");

                            b1.HasKey("ProductTypeId");

                            b1.ToTable("product_type_index", "catalog");

                            b1.WithOwner("ProductType")
                                .HasForeignKey("ProductTypeId");

                            b1.Navigation("ProductType");
                        });

                    b.Navigation("Index");

                    b.Navigation("Parent");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.AttributeDefinitionTr", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.EnumAttributeOptionTr", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Translations.ProductTypeTr", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.ProductType", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.Customer", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", "User")
                        .WithOne()
                        .HasForeignKey("Peers.Modules.Customers.Domain.Customer", "Id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.CustomerAddress", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", "Customer")
                        .WithMany("AddressList")
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Customer");
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.PaymentMethod", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", null)
                        .WithMany("PaymentMethods")
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.Listing", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.ProductType", "ProductType")
                        .WithMany()
                        .HasForeignKey("ProductTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Sellers.Domain.Seller", "Seller")
                        .WithMany("Listings")
                        .HasForeignKey("SellerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Sellers.Domain.ShippingProfile", "ShippingProfile")
                        .WithMany()
                        .HasForeignKey("ShippingProfileId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.OwnsMany("Peers.Modules.Listings.Domain.ListingAttribute", "Attributes", b1 =>
                        {
                            b1.Property<int>("ListingId")
                                .HasColumnType("int")
                                .HasColumnName("listing_id");

                            b1.Property<int>("AttributeDefinitionId")
                                .HasColumnType("int")
                                .HasColumnName("attribute_definition_id");

                            b1.Property<int>("AttributeKind")
                                .HasColumnType("int")
                                .HasColumnName("attribute_kind");

                            b1.Property<int?>("EnumAttributeOptionId")
                                .HasColumnType("int")
                                .HasColumnName("enum_attribute_option_id");

                            b1.Property<int?>("LookupOptionId")
                                .HasColumnType("int")
                                .HasColumnName("lookup_option_id");

                            b1.Property<int>("Position")
                                .HasColumnType("int")
                                .HasColumnName("position");

                            b1.Property<string>("Value")
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("value");

                            b1.HasKey("ListingId", "AttributeDefinitionId");

                            b1.HasIndex("AttributeDefinitionId");

                            b1.HasIndex("EnumAttributeOptionId");

                            b1.HasIndex("LookupOptionId");

                            b1.HasIndex("ListingId", "EnumAttributeOptionId")
                                .IsUnique()
                                .HasFilter("[enum_attribute_option_id] IS NOT NULL");

                            b1.HasIndex("ListingId", "LookupOptionId")
                                .IsUnique()
                                .HasFilter("[lookup_option_id] IS NOT NULL");

                            b1.ToTable("listing_attribute", null, t =>
                                {
                                    t.HasCheckConstraint("CK_LA_OnePayload", "(\r\n    [attribute_kind] IN (0,1,2,3,4) AND [value] IS NOT NULL\r\n    AND [enum_attribute_option_id] IS NULL AND [lookup_option_id] IS NULL\r\n)\r\nOR\r\n(\r\n    [attribute_kind] = 6 AND [enum_attribute_option_id] IS NOT NULL\r\n    AND [value] IS NULL AND [lookup_option_id] IS NULL\r\n)\r\nOR\r\n(\r\n    [attribute_kind] = 7 AND [lookup_option_id] IS NOT NULL\r\n    AND [value] IS NULL AND [enum_attribute_option_id] IS NULL\r\n)");

                                    t.HasCheckConstraint("CK_LA_Position_NonNegative", "[position] >= 0");
                                });

                            b1.HasOne("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", "AttributeDefinition")
                                .WithMany()
                                .HasForeignKey("AttributeDefinitionId")
                                .OnDelete(DeleteBehavior.Restrict)
                                .IsRequired();

                            b1.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", "EnumAttributeOption")
                                .WithMany()
                                .HasForeignKey("EnumAttributeOptionId")
                                .OnDelete(DeleteBehavior.Restrict);

                            b1.WithOwner("Listing")
                                .HasForeignKey("ListingId");

                            b1.HasOne("Peers.Modules.Lookup.Domain.LookupOption", "LookupOption")
                                .WithMany()
                                .HasForeignKey("LookupOptionId")
                                .OnDelete(DeleteBehavior.Restrict);

                            b1.Navigation("AttributeDefinition");

                            b1.Navigation("EnumAttributeOption");

                            b1.Navigation("Listing");

                            b1.Navigation("LookupOption");
                        });

                    b.Navigation("Attributes");

                    b.Navigation("ProductType");

                    b.Navigation("Seller");

                    b.Navigation("ShippingProfile");
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.ListingVariant", b =>
                {
                    b.HasOne("Peers.Modules.Listings.Domain.Listing", "Listing")
                        .WithMany("Variants")
                        .HasForeignKey("ListingId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsMany("Peers.Modules.Listings.Domain.ListingVariantAttribute", "Attributes", b1 =>
                        {
                            b1.Property<int>("ListingVariantId")
                                .HasColumnType("int")
                                .HasColumnName("listing_variant_id");

                            b1.Property<int>("AttributeDefinitionId")
                                .HasColumnType("int")
                                .HasColumnName("attribute_definition_id");

                            b1.Property<int>("AttributeKind")
                                .HasColumnType("int")
                                .HasColumnName("attribute_kind");

                            b1.Property<int?>("EnumAttributeOptionId")
                                .HasColumnType("int")
                                .HasColumnName("enum_attribute_option_id");

                            b1.Property<int?>("LookupOptionId")
                                .HasColumnType("int")
                                .HasColumnName("lookup_option_id");

                            b1.Property<decimal?>("NumericValue")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("numeric_value");

                            b1.Property<int>("Position")
                                .HasColumnType("int")
                                .HasColumnName("position");

                            b1.HasKey("ListingVariantId", "AttributeDefinitionId");

                            b1.HasIndex("EnumAttributeOptionId");

                            b1.HasIndex("LookupOptionId");

                            b1.HasIndex("AttributeDefinitionId", "EnumAttributeOptionId")
                                .HasDatabaseName("IX_LVA_Enum")
                                .HasFilter("[enum_attribute_option_id] IS NOT NULL");

                            b1.HasIndex("AttributeDefinitionId", "LookupOptionId")
                                .HasDatabaseName("IX_LVA_Lookup")
                                .HasFilter("[lookup_option_id] IS NOT NULL");

                            b1.HasIndex("AttributeDefinitionId", "NumericValue")
                                .HasDatabaseName("IX_LVA_Num")
                                .HasFilter("[numeric_value] IS NOT NULL");

                            b1.ToTable("listing_variant_attribute", null, t =>
                                {
                                    t.HasCheckConstraint("CK_LVA_Position_NonNegative", "[position] >= 0");

                                    t.HasCheckConstraint("CK_LVA_ValidValueCombination", "([attribute_kind] IN (0,1,6,7))\r\nAND (\r\n    ([attribute_kind] IN (0,1) AND [numeric_value] IS NOT NULL AND [enum_attribute_option_id] IS NULL AND [lookup_option_id] IS NULL)\r\n OR ([attribute_kind] = 6 AND [enum_attribute_option_id] IS NOT NULL AND [numeric_value] IS NULL AND [lookup_option_id] IS NULL)\r\n OR ([attribute_kind] = 7 AND [lookup_option_id] IS NOT NULL AND [numeric_value] IS NULL AND [enum_attribute_option_id] IS NULL)\r\n)                ");
                                });

                            b1.HasOne("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", "AttributeDefinition")
                                .WithMany()
                                .HasForeignKey("AttributeDefinitionId")
                                .OnDelete(DeleteBehavior.Restrict)
                                .IsRequired();

                            b1.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", "EnumAttributeOption")
                                .WithMany()
                                .HasForeignKey("EnumAttributeOptionId")
                                .OnDelete(DeleteBehavior.Restrict);

                            b1.WithOwner("ListingVariant")
                                .HasForeignKey("ListingVariantId");

                            b1.HasOne("Peers.Modules.Lookup.Domain.LookupOption", "LookupOption")
                                .WithMany()
                                .HasForeignKey("LookupOptionId")
                                .OnDelete(DeleteBehavior.Restrict);

                            b1.Navigation("AttributeDefinition");

                            b1.Navigation("EnumAttributeOption");

                            b1.Navigation("ListingVariant");

                            b1.Navigation("LookupOption");
                        });

                    b.Navigation("Attributes");

                    b.Navigation("Listing");
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.Translations.ListingTr", b =>
                {
                    b.HasOne("Peers.Modules.Listings.Domain.Listing", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupLink", b =>
                {
                    b.HasOne("Peers.Modules.Lookup.Domain.LookupType", "ChildType")
                        .WithMany("ChildLinks")
                        .HasForeignKey("ChildTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Lookup.Domain.LookupType", "ParentType")
                        .WithMany("ParentLinks")
                        .HasForeignKey("ParentTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Lookup.Domain.LookupOption", "ChildOption")
                        .WithMany()
                        .HasForeignKey("ChildTypeId", "ChildOptionId")
                        .HasPrincipalKey("TypeId", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Lookup.Domain.LookupOption", "ParentOption")
                        .WithMany()
                        .HasForeignKey("ParentTypeId", "ParentOptionId")
                        .HasPrincipalKey("TypeId", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ChildOption");

                    b.Navigation("ChildType");

                    b.Navigation("ParentOption");

                    b.Navigation("ParentType");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupOption", b =>
                {
                    b.HasOne("Peers.Modules.Lookup.Domain.LookupType", "Type")
                        .WithMany("Options")
                        .HasForeignKey("TypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Type");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.Translations.LookupOptionTr", b =>
                {
                    b.HasOne("Peers.Modules.Lookup.Domain.LookupOption", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Media.Domain.MediaFile", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", "Customer")
                        .WithMany()
                        .HasForeignKey("CustomerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Media.Domain.MediaFile", "Thumbnail")
                        .WithOne("Original")
                        .HasForeignKey("Peers.Modules.Media.Domain.MediaFile", "ThumbnailId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Customer");

                    b.Navigation("Thumbnail");
                });

            modelBuilder.Entity("Peers.Modules.Ordering.Domain.Order", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", "Buyer")
                        .WithMany()
                        .HasForeignKey("BuyerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Customers.Domain.PaymentMethod", "PaymentMethod")
                        .WithMany()
                        .HasForeignKey("PaymentMethodId");

                    b.HasOne("Peers.Modules.Sellers.Domain.Seller", "Seller")
                        .WithMany("Orders")
                        .HasForeignKey("SellerId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsMany("Peers.Modules.Ordering.Domain.OrderLine", "Lines", b1 =>
                        {
                            b1.Property<int>("OrderId")
                                .HasColumnType("int")
                                .HasColumnName("order_id");

                            b1.Property<int>("Id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("int")
                                .HasColumnName("id");

                            SqlServerPropertyBuilderExtensions.UseIdentityColumn(b1.Property<int>("Id"));

                            b1.Property<int>("ListingId")
                                .HasColumnType("int")
                                .HasColumnName("listing_id");

                            b1.Property<int>("Quantity")
                                .HasColumnType("int")
                                .HasColumnName("quantity");

                            b1.Property<decimal>("UnitPrice")
                                .HasPrecision(18, 2)
                                .HasColumnType("decimal(18,2)")
                                .HasColumnName("unit_price");

                            b1.Property<int>("VariantId")
                                .HasColumnType("int")
                                .HasColumnName("variant_id");

                            b1.HasKey("OrderId", "Id");

                            b1.HasIndex("ListingId");

                            b1.HasIndex("VariantId");

                            b1.HasIndex("OrderId", "VariantId")
                                .IsUnique();

                            b1.ToTable("order_line", (string)null);

                            b1.HasOne("Peers.Modules.Listings.Domain.Listing", "Listing")
                                .WithMany()
                                .HasForeignKey("ListingId")
                                .OnDelete(DeleteBehavior.Cascade)
                                .IsRequired();

                            b1.WithOwner("Order")
                                .HasForeignKey("OrderId");

                            b1.HasOne("Peers.Modules.Listings.Domain.ListingVariant", "Variant")
                                .WithMany()
                                .HasForeignKey("VariantId")
                                .OnDelete(DeleteBehavior.Cascade)
                                .IsRequired();

                            b1.Navigation("Listing");

                            b1.Navigation("Order");

                            b1.Navigation("Variant");
                        });

                    b.Navigation("Buyer");

                    b.Navigation("Lines");

                    b.Navigation("PaymentMethod");

                    b.Navigation("Seller");
                });

            modelBuilder.Entity("Peers.Modules.Sellers.Domain.ShippingProfile", b =>
                {
                    b.HasOne("Peers.Modules.Sellers.Domain.Seller", "Seller")
                        .WithMany("ShippingProfiles")
                        .HasForeignKey("SellerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Seller");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.PrivacyPolicyTr", b =>
                {
                    b.HasOne("Peers.Modules.Settings.Domain.PrivacyPolicy", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.TermsTr", b =>
                {
                    b.HasOne("Peers.Modules.Settings.Domain.Terms", null)
                        .WithMany("Translations")
                        .HasForeignKey("EntityId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.I18n.Domain.Language", null)
                        .WithMany()
                        .HasForeignKey("LangCode")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.AppUser", b =>
                {
                    b.OwnsMany("Peers.Modules.Users.Domain.AppUsageHistory", "AppUsage", b1 =>
                        {
                            b1.Property<int>("id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("int")
                                .HasColumnName("id");

                            SqlServerPropertyBuilderExtensions.UseIdentityColumn(b1.Property<int>("id"));

                            b1.Property<DateTime>("OpenedAt")
                                .HasColumnType("datetime2")
                                .HasColumnName("opened_at");

                            b1.Property<int>("user_id")
                                .HasColumnType("int")
                                .HasColumnName("user_id");

                            b1.HasKey("id");

                            b1.HasIndex("user_id");

                            b1.ToTable("app_usage_history", "dbo");

                            b1.WithOwner()
                                .HasForeignKey("user_id");
                        });

                    b.OwnsMany("Peers.Modules.Users.Domain.RefreshToken", "RefreshTokens", b1 =>
                        {
                            b1.Property<int>("id")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("int")
                                .HasColumnName("id");

                            SqlServerPropertyBuilderExtensions.UseIdentityColumn(b1.Property<int>("id"));

                            b1.Property<DateTime>("Created")
                                .HasColumnType("datetime2")
                                .HasColumnName("created");

                            b1.Property<DateTime?>("Revoked")
                                .HasColumnType("datetime2")
                                .HasColumnName("revoked");

                            b1.Property<string>("Token")
                                .IsRequired()
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)")
                                .HasColumnName("token");

                            b1.Property<byte[]>("concurrency_token")
                                .IsConcurrencyToken()
                                .ValueGeneratedOnAddOrUpdate()
                                .HasColumnType("rowversion")
                                .HasColumnName("concurrency_token");

                            b1.Property<int>("user_id")
                                .HasColumnType("int")
                                .HasColumnName("user_id");

                            b1.HasKey("id");

                            b1.HasIndex("user_id")
                                .IsUnique()
                                .HasFilter("[revoked] IS NULL");

                            b1.ToTable("refresh_token", "dbo");

                            b1.WithOwner()
                                .HasForeignKey("user_id");
                        });

                    b.Navigation("AppUsage");

                    b.Navigation("RefreshTokens");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.Device", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", "User")
                        .WithMany("DeviceList")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.UserNotification", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.Notification", "Notification")
                        .WithMany()
                        .HasForeignKey("notification_id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Users.Domain.AppUser", "User")
                        .WithMany("Notifications")
                        .HasForeignKey("user_id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Notification");

                    b.Navigation("User");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.UserStatusChange", b =>
                {
                    b.HasOne("Peers.Modules.Users.Domain.AppUser", "ChangedBy")
                        .WithMany()
                        .HasForeignKey("ChangedById")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("Peers.Modules.Users.Domain.AppUser", null)
                        .WithMany("StatusChangeHistory")
                        .HasForeignKey("user_id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ChangedBy");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeDefinition", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeDefinition", "DependsOn")
                        .WithMany()
                        .HasForeignKey("DependsOnId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("DependsOn");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.LookupAttributeDefinition", b =>
                {
                    b.HasOne("Peers.Modules.Lookup.Domain.LookupType", "LookupType")
                        .WithMany()
                        .HasForeignKey("LookupTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsMany("Peers.Modules.Catalog.Domain.Attributes.LookupAllowed", "AllowedOptions", b1 =>
                        {
                            b1.Property<int>("AttributeDefinitionId")
                                .HasColumnType("int")
                                .HasColumnName("attribute_definition_id");

                            b1.Property<int>("OptionId")
                                .HasColumnType("int")
                                .HasColumnName("option_id");

                            b1.Property<int>("TypeId")
                                .HasColumnType("int")
                                .HasColumnName("type_id");

                            b1.HasKey("AttributeDefinitionId", "OptionId");

                            b1.HasIndex("TypeId", "OptionId");

                            b1.ToTable("lookup_allowed", "catalog");

                            b1.WithOwner("AttributeDefinition")
                                .HasForeignKey("AttributeDefinitionId");

                            b1.HasOne("Peers.Modules.Lookup.Domain.LookupOption", "Option")
                                .WithMany()
                                .HasForeignKey("TypeId", "OptionId")
                                .HasPrincipalKey("TypeId", "Id")
                                .OnDelete(DeleteBehavior.Restrict)
                                .IsRequired();

                            b1.Navigation("AttributeDefinition");

                            b1.Navigation("Option");
                        });

                    b.Navigation("AllowedOptions");

                    b.Navigation("LookupType");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.NumericAttributeDefinition", b =>
                {
                    b.HasOne("Peers.Modules.Catalog.Domain.Attributes.GroupAttributeDefinition", "GroupDefinition")
                        .WithMany("Members")
                        .HasForeignKey("GroupDefinitionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("GroupDefinition");
                });

            modelBuilder.Entity("Peers.Modules.Sellers.Domain.Seller", b =>
                {
                    b.HasOne("Peers.Modules.Customers.Domain.Customer", null)
                        .WithOne()
                        .HasForeignKey("Peers.Modules.Sellers.Domain.Seller", "Id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.AttributeDefinition", b =>
                {
                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeOption", b =>
                {
                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.ProductType", b =>
                {
                    b.Navigation("Attributes");

                    b.Navigation("Children");

                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Customers.Domain.Customer", b =>
                {
                    b.Navigation("AddressList");

                    b.Navigation("PaymentMethods");
                });

            modelBuilder.Entity("Peers.Modules.Listings.Domain.Listing", b =>
                {
                    b.Navigation("Translations");

                    b.Navigation("Variants");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupOption", b =>
                {
                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Lookup.Domain.LookupType", b =>
                {
                    b.Navigation("ChildLinks");

                    b.Navigation("Options");

                    b.Navigation("ParentLinks");
                });

            modelBuilder.Entity("Peers.Modules.Media.Domain.MediaFile", b =>
                {
                    b.Navigation("Original");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.PrivacyPolicy", b =>
                {
                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Settings.Domain.Terms", b =>
                {
                    b.Navigation("Translations");
                });

            modelBuilder.Entity("Peers.Modules.Users.Domain.AppUser", b =>
                {
                    b.Navigation("DeviceList");

                    b.Navigation("Notifications");

                    b.Navigation("StatusChangeHistory");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.EnumAttributeDefinition", b =>
                {
                    b.Navigation("Options");
                });

            modelBuilder.Entity("Peers.Modules.Catalog.Domain.Attributes.GroupAttributeDefinition", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("Peers.Modules.Sellers.Domain.Seller", b =>
                {
                    b.Navigation("Listings");

                    b.Navigation("Orders");

                    b.Navigation("ShippingProfiles");
                });
#pragma warning restore 612, 618
        }
    }
}
